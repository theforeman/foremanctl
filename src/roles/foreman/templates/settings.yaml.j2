---
:foreman_url: {{ foreman_url }}

:ssl_certificate: /etc/foreman/client_cert.pem
:ssl_ca_file: /etc/foreman/katello-default-ca.crt
:ssl_priv_key: /etc/foreman/client_key.pem

:require_ssl: true

:rails_cache_store:
  :type: redis
  :urls:
    - redis://localhost:6379/4
  :options:
    :compress: true
    :namespace: foreman

{% if foreman_oauth_consumer_key is defined and foreman_oauth_consumer_secret is defined %}
:oauth_active: true
:oauth_consumer_key: {{ foreman_oauth_consumer_key }}
:oauth_consumer_secret: {{ foreman_oauth_consumer_secret }}
{% endif %}

{% if httpd_external_authentication in ['ipa', 'ipa_with_api'] %}
:authorize_login_delegation: true
:authorize_login_delegation_auth_source_user_autocreate: External
{% endif %}
{% if httpd_external_authentication == 'ipa_with_api' %}
:authorize_login_delegation_api: true
{% endif %}

# Configure reverse proxy headers
:ssl_client_dn_env: HTTP_SSL_CLIENT_S_DN
:ssl_client_verify_env: HTTP_SSL_CLIENT_VERIFY
:ssl_client_cert_env: HTTP_SSL_CLIENT_CERT
